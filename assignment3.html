<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrated Interactive Visualizations</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#8B5CF6',
                        neutral: '#64748B',
                        light: '#F8FAFC',
                        dark: '#1E293B',
                        gold: '#F59E0B'
                    },
                    fontFamily: {
                        math: ['Times New Roman', 'serif'],
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .chart-container {
                @apply relative h-[400px] w-full md:w-3/4 mx-auto my-8;
            }
            .control-btn {
                @apply px-4 py-2 rounded-md bg-primary/10 hover:bg-primary/20 transition-colors duration-300 cursor-pointer text-gray-800 font-medium;
            }
            .control-btn.active {
                @apply bg-primary text-white;
            }
            .math-script {
                font-family: 'Times New Roman', serif;
                font-style: italic;
            }
            .vector-label {
                transition: all 0.3s ease;
                cursor: pointer;
            }
            .vector-line {
                transition: all 0.3s ease;
            }
            .parallelogram {
                transition: transform 0.5s ease;
            }
            .parallelogram:hover {
                transform: scale(1.02);
            }
            .interaction-guide {
                background-color: #f8fafc;
                border-radius: 6px;
                padding: 1rem;
                margin-top: 1rem;
            }
            .draggable {
                cursor: move;
            }
            .info-box {
                background-color: rgba(255, 255, 255, 0.9);
                border: 1px solid #ddd;
                border-radius: 4px;
                padding: 8px 12px;
                font-size: 0.8em;
                pointer-events: none;
            }
            .tooltip {
                opacity: 0;
                transition: opacity 0.3s ease;
                pointer-events: none;
            }
            .creation-steps {
                background-color: #f8fafc;
                border-radius: 6px;
                padding: 1rem;
                margin-top: 1rem;
            }
            .data-point {
                transition: all 0.2s ease;
            }
            .data-point:hover {
                stroke-width: 4;
            }
            .legend-item {
                @apply flex items-center gap-2 cursor-pointer transition-all duration-300 hover:opacity-80;
            }
            .legend-color {
                @apply w-4 h-4 rounded-sm;
            }
            .page-content {
                display: none;
            }
            .page-content.active {
                display: block;
                animation: fadeIn 0.5s ease;
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <div class="font-bold text-xl text-primary">Interactive Visualizations</div>
                <div class="flex space-x-4">
                    <button class="nav-btn px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-100 transition-colors" data-page="page1">Vector Diagram</button>
                    <button class="nav-btn px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-100 transition-colors" data-page="page2">Data Charts</button>
                    <button class="nav-btn px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-100 transition-colors" data-page="page3">Venn Diagram</button>
                    <button class="nav-btn px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-100 transition-colors" data-page="page4">Validation Chart</button>
                    <button class="nav-btn px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-100 transition-colors" data-page="page5">Density Distribution</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-8">
        <!-- Page 1: Vector Parallelogram Illustration -->
        <div id="page1" class="page-content active bg-white rounded-lg shadow-lg p-6 max-w-5xl w-full mx-auto">
            <h1 class="text-2xl font-bold text-center mb-4 text-gray-800">Vector Parallelogram Illustration</h1>
            
            <!-- Control buttons area -->
            <div class="flex justify-center gap-4 mb-4 flex-wrap">
                <button id="zoom-in" class="bg-primary hover:bg-primary/80 text-white px-3 py-1 rounded-md transition-colors text-sm">
                    <i class="fa fa-search-plus mr-1"></i> Zoom In
                </button>
                <button id="zoom-out" class="bg-primary hover:bg-primary/80 text-white px-3 py-1 rounded-md transition-colors text-sm">
                    <i class="fa fa-search-minus mr-1"></i> Zoom Out
                </button>
                <button id="show-coords" class="bg-secondary hover:bg-secondary/80 text-white px-3 py-1 rounded-md transition-colors text-sm">
                    <i class="fa fa-crosshairs mr-1"></i> Show Coordinates
                </button>
                <button id="reset-btn" class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded-md transition-colors text-sm">
                    <i class="fa fa-refresh mr-1"></i> Reset View
                </button>
            </div>
            
            <div class="relative w-full aspect-square max-w-2xl mx-auto border border-gray-200 rounded-md" id="vector-diagram">
                <!-- Coordinate information box -->
                <div id="vector-info" class="info-box absolute top-2 right-2 hidden"></div>
                
                <!-- Parallelogram main body -->
                <svg class="w-full h-full parallelogram" viewBox="0 50 500 400" id="vector-svg">
                    <!-- Grid background -->
                    <pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse">
                        <path d="M 50 0 L 0 0 0 50" fill="none" stroke="#f0f0f0" stroke-width="0.5"/>
                    </pattern>
                    <rect width="100%" height="100%" fill="url(#grid)" />
                    
                    <!-- Parallelogram edges -->
                    <path d="M150,100 L400,100 L300,300 L50,300 Z" fill="none" stroke="#333" stroke-width="2" class="vector-line" />
                    
                    <!-- Diagonals -->
                    <path d="M150,100 L300,300" fill="none" stroke="#9CA3AF" stroke-width="2" stroke-dasharray="5,5" class="vector-line diagonal-1" />
                    <path d="M400,100 L50,300" fill="none" stroke="#60A5FA" stroke-width="2" stroke-dasharray="5,5" class="vector-line diagonal-2" />
                    
                    <!-- Vector e₁^α -->
                    <path d="M150,100 L400,100" fill="none" stroke="#3B82F6" stroke-width="3" class="vector-line e1a" />
                    <polygon points="400,100 385,95 385,105" fill="#3B82F6" class="vector-arrow draggable" data-vector="e1a" />
                    
                    <!-- Vector e₂^α -->
                    <path d="M150,100 L50,300" fill="none" stroke="#10B981" stroke-width="3" class="vector-line e2a" />
                    <polygon points="50,300 65,295 65,305" fill="#10B981" class="vector-arrow draggable" data-vector="e2a" />
                    
                    <!-- Vector e₁^β -->
                    <path d="M50,300 L300,300" fill="none" stroke="#8B5CF6" stroke-width="3" class="vector-line e1b" />
                    <polygon points="300,300 285,295 285,305" fill="#8B5CF6" class="vector-arrow draggable" data-vector="e1b" />
                    
                    <!-- Vector e₂^β -->
                    <path d="M300,300 L400,100" fill="none" stroke="#EC4899" stroke-width="3" class="vector-line e2b" />
                    <polygon points="400,100 395,115 405,115" fill="#EC4899" class="vector-arrow draggable" data-vector="e2b" />
                    
                    <!-- Vector labels -->
                    <text x="420" y="100" class="vector-label e1a-label text-primary font-bold" data-vector="e1a">e<tspan baseline-shift="super" font-size="0.7em">α</tspan><tspan baseline-shift="sub" font-size="0.7em">1</tspan></text>
                    <text x="120" y="80" class="vector-label e2a-label text-secondary font-bold" data-vector="e2a">e<tspan baseline-shift="super" font-size="0.7em">α</tspan><tspan baseline-shift="sub" font-size="0.7em">2</tspan></text>
                    <text x="320" y="320" class="vector-label e1b-label text-accent font-bold" data-vector="e1b">e<tspan baseline-shift="super" font-size="0.7em">β</tspan><tspan baseline-shift="sub" font-size="0.7em">1</tspan></text>
                    <text x="30" y="320" class="vector-label e2b-label text-pink-500 font-bold" data-vector="e2b">e<tspan baseline-shift="super" font-size="0.7em">β</tspan><tspan baseline-shift="sub" font-size="0.7em">2</tspan></text>
                    
                    <!-- Origin marker -->
                    <circle cx="150" cy="100" r="4" fill="#333" />
                    <text x="130" y="90" font-size="12">O</text>
                </svg>
            </div>

            <!-- Interaction instructions -->
            <div class="interaction-guide max-w-2xl mx-auto mt-6">
                <h3 class="font-semibold text-gray-800 mb-2">Interaction Guide:</h3>
                <p class="text-gray-700 text-sm">1. Drag vector arrows to adjust their length and direction</p>
                <p class="text-gray-700 text-sm">2. Hover over vector labels to see highlight effect, click to pin highlight</p>
                <p class="text-gray-700 text-sm">3. Use zoom in/out buttons to adjust view scale</p>
                <p class="text-gray-700 text-sm">4. Click "Show Coordinates" to view vector coordinate information</p>
                <p class="text-gray-700 text-sm">5. Click "Reset View" to restore initial state</p>
            </div>
        </div>

        <!-- Page 2: Interactive Charts -->
        <div id="page2" class="page-content bg-white rounded-lg shadow-lg p-6 max-w-5xl w-full mx-auto">
            <h1 class="text-2xl md:text-3xl font-bold text-center mb-8 text-gray-800">Interactive Data Visualizations</h1>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- 左侧柱状图 -->
                <div class="chart-container bg-gray-50 p-4 rounded-lg shadow">
                    <h2 class="text-lg font-semibold mb-4 text-gray-700">Probability Distribution</h2>
                    <div class="relative w-full h-[300px]">
                        <svg class="w-full h-full" viewBox="0 0 400 300">
                            <!-- 坐标轴 -->
                            <line x1="50" y1="250" x2="350" y2="250" stroke="#333" stroke-width="2" />
                            <line x1="50" y1="250" x2="50" y2="50" stroke="#333" stroke-width="2" />
                            
                            <!-- 箭头 -->
                            <polygon points="350,250 340,245 340,255" fill="#333" />
                            <polygon points="50,50 45,60 55,60" fill="#333" />
                            
                            <!-- 刻度线 -->
                            <line x1="100" y1="250" x2="100" y2="245" stroke="#333" />
                            <line x1="150" y1="250" x2="150" y2="245" stroke="#333" />
                            <line x1="350" y1="250" x2="350" y2="245" stroke="#333" />
                            
                            <line x1="50" y1="200" x2="45" y2="200" stroke="#333" />
                            <line x1="50" y1="100" x2="45" y2="100" stroke="#333" />
                            
                            <!-- 轴标签 -->
                            <text x="360" y="255" font-size="12" fill="#333">i/n</text>
                            <text x="55" y="45" font-size="12" fill="#333">p</text>
                            
                            <text x="100" y="265" font-size="10" fill="#333">i/n</text>
                            <text x="140" y="265" font-size="10" fill="#333">(i+Δn)/n</text>
                            <text x="345" y="265" font-size="10" fill="#333">1</text>
                            
                            <text x="30" y="203" font-size="10" fill="#333">p₁ (Low)</text>
                            <text x="30" y="103" font-size="10" fill="#333">p₂ (High)</text>
                            
                            <!-- 虚线 -->
                            <line x1="50" y1="200" x2="350" y2="200" stroke="#999" stroke-width="1" stroke-dasharray="4,2" />
                            <line x1="50" y1="100" x2="200" y2="100" stroke="#999" stroke-width="1" stroke-dasharray="4,2" />
                            <line x1="300" y1="100" x2="350" y2="100" stroke="#999" stroke-width="1" stroke-dasharray="4,2" />
                            
                            <!-- 紫色柱状图和区域 -->
                            <rect x="100" y="100" width="50" height="100" fill="#C4B5FD" opacity="0.7" class="data-point" />
                            <rect x="100" y="200" width="250" height="50" fill="#C4B5FD" opacity="0.5" class="data-point" />
                            
                            <!-- 虚线矩形 -->
                            <rect x="300" y="100" width="50" height="100" fill="none" stroke="#9333EA" stroke-width="1.5" stroke-dasharray="4,2" class="data-point" />
                            
                            <!-- 箭头 -->
                            <line x1="170" y1="150" x2="280" y2="150" stroke="#7C3AED" stroke-width="2" stroke-dasharray="0" />
                            <polygon points="280,150 270,145 270,155" fill="#7C3AED" />
                            
                            <!-- 提示框 -->
                            <rect id="tooltip1" class="tooltip" x="0" y="0" rx="4" ry="4" fill="white" stroke="#ccc" stroke-width="1" width="100" height="40" />
                            <text id="tooltip-text1" class="tooltip" x="0" y="0" font-size="12" fill="#333"></text>
                        </svg>
                    </div>
                </div>
                
                <!-- 右侧曲线图 -->
                <div class="chart-container bg-gray-50 p-4 rounded-lg shadow">
                    <h2 class="text-lg font-semibold mb-4 text-gray-700">Position Chart</h2>
                    <div class="relative w-full h-[300px]">
                        <svg class="w-full h-full" viewBox="0 0 400 300">
                            <!-- 坐标轴 -->
                            <line x1="50" y1="250" x2="350" y2="250" stroke="#333" stroke-width="2" />
                            <line x1="50" y1="250" x2="50" y2="50" stroke="#333" stroke-width="2" />
                            
                            <!-- 箭头 -->
                            <polygon points="350,250 340,245 340,255" fill="#333" />
                            <polygon points="50,50 45,60 55,60" fill="#333" />
                            
                            <!-- 刻度线和标签 -->
                            <line x1="50" y1="250" x2="50" y2="245" stroke="#333" />
                            <line x1="200" y1="250" x2="200" y2="245" stroke="#333" />
                            <line x1="350" y1="250" x2="350" y2="245" stroke="#333" />
                            
                            <line x1="50" y1="250" x2="45" y2="250" stroke="#333" />
                            <line x1="50" y1="150" x2="45" y2="150" stroke="#333" />
                            <line x1="50" y1="50" x2="45" y2="50" stroke="#333" />
                            
                            <text x="45" y="255" font-size="10" fill="#333">0</text>
                            <text x="190" y="265" font-size="10" fill="#333">0.5</text>
                            <text x="345" y="265" font-size="10" fill="#333">1</text>
                            <text x="55" y="255" font-size="10" fill="#333">position</text>
                            
                            <text x="30" y="253" font-size="10" fill="#333">0</text>
                            <text x="30" y="153" font-size="10" fill="#333">20</text>
                            <text x="30" y="53" font-size="10" fill="#333">40</text>
                            
                            <!-- 绿色曲线 -->
                            <path d="M100,100 Q200,110 300,150" fill="none" stroke="#10B981" stroke-width="2.5" class="data-point" />
                            
                            <!-- 浅绿色虚线 -->
                            <path d="M100,80 Q200,90 300,120" fill="none" stroke="#A7F3D0" stroke-width="2" stroke-dasharray="5,3" class="data-point" />
                            
                            <!-- 提示框 -->
                            <rect id="tooltip2" class="tooltip" x="0" y="0" rx="4" ry="4" fill="white" stroke="#ccc" stroke-width="1" width="80" height="30" />
                            <text id="tooltip-text2" class="tooltip" x="0" y="0" font-size="12" fill="#333"></text>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 text-center text-gray-600">
                <p>Interactive features: Hover over chart elements to see details</p>
            </div>

            <!-- 英文制作过程说明 -->
            <div class="creation-steps max-w-4xl mx-auto mt-8">
                <h3 class="font-semibold text-gray-800 mb-2">Creation Process:</h3>
                <p class="text-gray-700 text-sm">1. Design SVG charts with coordinate systems and axis labels</p>
                <p class="text-gray-700 text-sm">2. Add data visualization elements (bars, curves, shapes)</p>
                <p class="text-gray-700 text-sm">3. Implement interactive tooltips using JavaScript event listeners</p>
                <p class="text-gray-700 text-sm">4. Apply CSS transitions for smooth hover effects</p>
                <p class="text-gray-700 text-sm">5. Ensure responsive layout with Tailwind CSS grid system</p>
            </div>
        </div>

        <!-- Page 3: Enhanced Interactive Venn Diagram -->
        <div id="page3" class="page-content bg-white rounded-lg shadow-lg p-6 max-w-5xl w-full mx-auto">
            <h1 class="text-2xl font-bold text-center mb-4 text-gray-800">Enhanced Interactive Venn Diagram</h1>
            
            <div style="max-width: 700px; margin: 0 auto;">
                <svg width="600" height="550" viewBox="0 0 600 550" xmlns="http://www.w3.org/2000/svg">
                    <!-- Delete圆（左下紫色） -->
                    <circle class="section" cx="180" cy="320" r="180" fill="#C8B6E2" fill-opacity="0.9" data-area="delete" 
                            data-description="删除操作：移除不需要的内容或元素" />
                    
                    <!-- Replace圆（上方棕色） -->
                    <circle class="section" cx="300" cy="200" r="170" fill="#D8C3A5" fill-opacity="0.9" data-area="replace"
                            data-description="替换操作：用新内容或元素替换现有项" />
                    
                    <!-- Rewrite圆（右下黄色） -->
                    <circle class="section" cx="420" cy="320" r="180" fill="#F2D7A6" fill-opacity="0.9" data-area="rewrite"
                            data-description="重写操作：对内容进行修改和重构" />
                    
                    <!-- 区域标注 -->
                    <text x="100" y="320" font-size="24" font-weight="bold" class="label">I</text>
                    <text x="300" y="120" font-size="24" font-weight="bold" class="label">II</text>
                    <text x="500" y="320" font-size="24" font-weight="bold" class="label">III</text>
                    <text x="210" y="220" font-size="24" font-weight="bold" class="label">IV</text>
                    <text x="380" y="220" font-size="24" font-weight="bold" class="label">V</text>
                    <text x="260" y="380" font-size="24" font-weight="bold" class="label">VI</text>
                    <text x="300" y="270" font-size="24" font-weight="bold" class="label">VII</text>
                    
                    <!-- 操作标签 -->
                    <text x="60" y="520" font-size="20" font-weight="bold" class="label">Delete</text>
                    <text x="250" y="80" font-size="20" font-weight="bold" class="label">Replace</text>
                    <text x="400" y="520" font-size="20" font-weight="bold" class="label">Rewrite</text>
                </svg>
                
                <p style="text-align: center; color: #666; margin-top: 10px;">
                    交互提示：悬停在圆上查看高亮效果，点击圆可选中/取消选中
                </p>
                
                <!-- 新增信息面板 -->
                <div class="info-panel" id="infoPanel">
                    <h3 id="panelTitle">操作信息</h3>
                    <p id="panelDescription"></p>
                </div>
                
                <!-- 选中计数显示 -->
                <div class="count-display" id="selectionCount">
                    已选中: 0 个区域
                </div>
                
                <!-- 重置按钮 -->
                <button class="reset-btn" id="resetBtn">重置选中状态</button>

                <!-- 英文制作过程说明 -->
                <div class="creation-steps">
                    <h3>Creation Process:</h3>
                    <p>1. Draw three overlapping circles with SVG at triangular positions</p>
                    <p>2. Apply distinct colors to each circle (purple, brown, yellow)</p>
                    <p>3. Add Roman numeral labels (I-VII) for intersection areas</p>
                    <p>4. Implement hover effects with CSS transitions</p>
                    <p>5. Add click-to-select functionality using JavaScript</p>
                </div>
            </div>
        </div>

        <!-- Page 4: Cross Validation Accuracy Chart -->
        <div id="page4" class="page-content bg-white rounded-lg shadow-lg p-6 max-w-5xl w-full mx-auto">
            <h1 class="text-2xl font-bold text-center mb-4 text-gray-800">Cross Validation Accuracy Chart</h1>
            
            <!-- AI制作过程描述 -->
            <div class="mb-8">
                <h2 class="text-xl font-bold mb-3 text-gray-800">AI Model Development Process</h2>
                <p class="text-gray-700 mb-2">This chart visualizes cross-validation results of three NLP models. The development process involved:</p>
                <ul class="list-disc pl-5 text-gray-700 space-y-1">
                    <li>Data collection and preprocessing for training AI models</li>
                    <li>Fine-tuning BERT, RoBERTa, and BART on domain-specific datasets</li>
                    <li>Implementing 10-fold cross-validation to ensure result reliability</li>
                    <li>Calculating accuracy metrics and standard deviation for each model</li>
                    <li>Visualizing performance comparisons using Chart.js</li>
                    <li>Analyzing results to identify the most effective AI model for the task</li>
                </ul>
            </div>
            
            <!-- 控制按钮区域 -->
            <div class="flex flex-wrap gap-3 mb-6">
                <button id="toggleData" class="control-btn">切换显示数据</button>
                <button id="toggleType" class="control-btn">切换图表类型</button>
                <button id="resetZoom4" class="control-btn">重置缩放</button>
                <div class="ml-auto">
                    <label class="inline-flex items-center mr-4">
                        <input type="checkbox" id="showMean" checked class="form-checkbox h-5 w-5 text-primary">
                        <span class="ml-2">显示平均准确率</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="checkbox" id="showStd" checked class="form-checkbox h-5 w-5 text-primary">
                        <span class="ml-2">显示标准差</span>
                    </label>
                </div>
            </div>
            
            <!-- 图表容器 -->
            <div class="chart-container">
                <canvas id="accuracyChart"></canvas>
            </div>
        </div>

        <!-- Page 5: Probability Density Distribution Chart -->
        <div id="page5" class="page-content bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-5xl w-full mx-auto">
            <h1 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-primary mb-2">Probability Density Distribution</h1>
            <p class="text-neutral mb-2">Showing probability density distributions of p(x, y=0)*v(x) and p(x, y=1)*v(x)</p>
            <p class="text-sm text-neutral italic">Created with Chart.js and Tailwind CSS: simulated data generation → chart configuration → theme integration → interactive features implementation</p>
            
            <div class="flex items-center gap-4 mb-6">
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                    <i class="fa fa-moon-o dark:hidden text-xl"></i>
                    <i class="fa fa-sun-o hidden dark:block text-xl"></i>
                </button>
                <button id="reset-zoom5" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors flex items-center gap-2">
                    <i class="fa fa-refresh"></i>
                    <span>Reset View</span>
                </button>
            </div>
            
            <!-- Chart container -->
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 md:p-6 mb-6 transition-all duration-300 hover:shadow-lg">
                <div class="chart-container">
                    <canvas id="densityChart"></canvas>
                    <div id="infoBox5" class="info-box"></div>
                </div>
            </div>
            
            <!-- Legend and description -->
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 md:p-6 transition-all duration-300">
                <h2 class="text-xl font-semibold mb-4">Legend Explanation</h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <div id="legend-0" class="legend-item mb-3">
                            <div class="legend-color bg-secondary"></div>
                            <span>p(x, y=0)*v(x)</span>
                        </div>
                        <div id="legend-1" class="legend-item">
                            <div class="legend-color bg-primary"></div>
                            <span>p(x, y=1)*v(x)</span>
                        </div>
                    </div>
                    <div>
                        <p class="text-neutral mb-2">This chart shows the distribution of two probability density functions:</p>
                        <ul class="list-disc pl-5 text-neutral space-y-1">
                            <li>Yellow curve represents p(x, y=0)*v(x)</li>
                            <li>Blue curve represents p(x, y=1)*v(x)</li>
                            <li>Gray shaded area indicates the overlapping part of the two distributions</li>
                            <li>Click on the legend to hide/show the corresponding curve</li>
                            <li>Hover over the chart to see detailed values</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Navigation functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Set up navigation
            const navButtons = document.querySelectorAll('.nav-btn');
            const pageContents = document.querySelectorAll('.page-content');
            
            navButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const pageId = this.getAttribute('data-page');
                    
                    // Update active navigation button
                    navButtons.forEach(btn => btn.classList.remove('bg-primary', 'text-white'));
                    this.classList.add('bg-primary', 'text-white');
                    
                    // Show active page content
                    pageContents.forEach(page => {
                        page.classList.remove('active');
                    });
                    document.getElementById(pageId).classList.add('active');
                });
            });
            
            // Initialize first navigation button as active
            navButtons[0].classList.add('bg-primary', 'text-white');
            
            // Initialize Page 1: Vector Diagram functionality
            initPage1();
            
            // Initialize Page 2: Interactive Charts functionality
            initPage2();
            
            // Initialize Page 3: Venn Diagram functionality
            initPage3();
            
            // Initialize Page 4: Validation Chart functionality
            initPage4();
            
            // Initialize Page 5: Density Distribution functionality
            initPage5();
        });
        
        // Page 1: Vector Diagram functionality
        function initPage1() {
            // Get elements
            const vectorLabels = document.querySelectorAll('.vector-label');
            const vectorArrows = document.querySelectorAll('.vector-arrow.draggable');
            const vectorSvg = document.getElementById('vector-svg');
            const resetBtn = document.getElementById('reset-btn');
            const zoomInBtn = document.getElementById('zoom-in');
            const zoomOutBtn = document.getElementById('zoom-out');
            const showCoordsBtn = document.getElementById('show-coords');
            const vectorInfo = document.getElementById('vector-info');
            
            // Vector data - store start and end points of each vector
            const vectorData = {
                e1a: { start: { x: 150, y: 100 }, end: { x: 400, y: 100 } },
                e2a: { start: { x: 150, y: 100 }, end: { x: 50, y: 300 } },
                e1b: { start: { x: 50, y: 300 }, end: { x: 300, y: 300 } },
                e2b: { start: { x: 300, y: 300 }, end: { x: 400, y: 100 } }
            };
            
            // Zoom-related variables
            let currentScale = 1;
            const scaleStep = 0.1;
            const minScale = 0.5;
            const maxScale = 1.5;
            
            // Coordinate display state
            let showingCoords = false;
            
            // Add hover effects to each label
            vectorLabels.forEach(label => {
                // Hover effect
                label.addEventListener('mouseenter', () => {
                    const vectorId = label.dataset.vector;
                    highlightVector(vectorId, true);
                    if (showingCoords) {
                        showVectorInfo(vectorId);
                    }
                });
                
                label.addEventListener('mouseleave', () => {
                    const vectorId = label.dataset.vector;
                    // Only remove highlight if not selected
                    if (!label.classList.contains('selected')) {
                        highlightVector(vectorId, false);
                        if (showingCoords) {
                            vectorInfo.classList.add('hidden');
                        }
                    }
                });
                
                // Click to toggle selection state
                label.addEventListener('click', () => {
                    const vectorId = label.dataset.vector;
                    label.classList.toggle('selected');
                    label.classList.toggle('text-yellow-600');
                    label.classList.toggle('scale-110');
                    label.classList.toggle('font-extrabold');
                    
                    if (label.classList.contains('selected')) {
                        highlightVector(vectorId, true);
                        if (showingCoords) {
                            showVectorInfo(vectorId);
                        }
                    } else {
                        highlightVector(vectorId, false);
                        if (showingCoords) {
                            vectorInfo.classList.add('hidden');
                        }
                    }
                });
            });
            
            // Highlight a vector by ID
            function highlightVector(vectorId, highlight) {
                const line = document.querySelector(`.vector-line.${vectorId}`);
                const arrow = document.querySelector(`.vector-arrow[data-vector="${vectorId}"]`);
                
                if (highlight) {
                    line.setAttribute('stroke-width', '5');
                    arrow.setAttribute('stroke', '#000');
                    arrow.setAttribute('stroke-width', '1');
                } else {
                    line.setAttribute('stroke-width', '3');
                    arrow.setAttribute('stroke', 'none');
                    arrow.setAttribute('stroke-width', '0');
                }
            }
            
            // Show vector information
            function showVectorInfo(vectorId) {
                const vector = vectorData[vectorId];
                const dx = vector.end.x - vector.start.x;
                const dy = vector.end.y - vector.start.y;
                const length = Math.sqrt(dx * dx + dy * dy).toFixed(1);
                
                vectorInfo.innerHTML = `
                    <strong>${vectorId}:</strong><br>
                    Start: (${vector.start.x}, ${vector.start.y})<br>
                    End: (${vector.end.x.toFixed(0)}, ${vector.end.y.toFixed(0)})<br>
                    Components: (${dx.toFixed(0)}, ${dy.toFixed(0)})<br>
                    Length: ${length}
                `;
                vectorInfo.classList.remove('hidden');
            }
            
            // Zoom functionality
            zoomInBtn.addEventListener('click', () => {
                if (currentScale < maxScale) {
                    currentScale += scaleStep;
                    applyScale();
                }
            });
            
            zoomOutBtn.addEventListener('click', () => {
                if (currentScale > minScale) {
                    currentScale -= scaleStep;
                    applyScale();
                }
            });
            
            function applyScale() {
                vectorSvg.style.transform = `scale(${currentScale})`;
                vectorSvg.style.transformOrigin = 'center';
            }
            
            // Show/hide coordinate information
            showCoordsBtn.addEventListener('click', () => {
                showingCoords = !showingCoords;
                showCoordsBtn.innerHTML = showingCoords ? 
                    '<i class="fa fa-crosshairs mr-1"></i> Hide Coordinates' : 
                    '<i class="fa fa-crosshairs mr-1"></i> Show Coordinates';
                
                if (!showingCoords) {
                    vectorInfo.classList.add('hidden');
                } else {
                    // Check if there's a selected vector
                    const selectedLabel = document.querySelector('.vector-label.selected');
                    if (selectedLabel) {
                        showVectorInfo(selectedLabel.dataset.vector);
                    }
                }
            });
            
            // Reset button functionality
            resetBtn.addEventListener('click', () => {
                // Reset vector data
                vectorData.e1a = { start: { x: 150, y: 100 }, end: { x: 400, y: 100 } };
                vectorData.e2a = { start: { x: 150, y: 100 }, end: { x: 50, y: 300 } };
                vectorData.e1b = { start: { x: 50, y: 300 }, end: { x: 300, y: 300 } };
                vectorData.e2b = { start: { x: 300, y: 300 }, end: { x: 400, y: 100 } };
                
                // Update all vectors
                Object.keys(vectorData).forEach(updateVector);
                
                // Update parallelogram
                updateParallelogram();
                
                // Reset highlight and selection states
                vectorLabels.forEach(label => {
                    label.classList.remove('selected', 'text-yellow-600', 'scale-110', 'font-extrabold');
                    highlightVector(label.dataset.vector, false);
                });
                
                // Reset zoom
                currentScale = 1;
                applyScale();
                
                // Reset coordinate display
                showingCoords = false;
                showCoordsBtn.innerHTML = '<i class="fa fa-crosshairs mr-1"></i> Show Coordinates';
                vectorInfo.classList.add('hidden');
            });
            
            // Update vector position
            function updateVector(vectorId) {
                const vector = vectorData[vectorId];
                const line = document.querySelector(`.vector-line.${vectorId}`);
                
                if (line) {
                    line.setAttribute('d', `M${vector.start.x},${vector.start.y} L${vector.end.x},${vector.end.y}`);
                    
                    // Update arrow position
                    const arrow = document.querySelector(`.vector-arrow[data-vector="${vectorId}"]`);
                    if (arrow) {
                        // Calculate arrow points based on vector direction
                        const dx = vector.end.x - vector.start.x;
                        const dy = vector.end.y - vector.start.y;
                        const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                        
                        // Set arrow position (end point of vector)
                        // Arrow points are defined in the SVG, so we just need to ensure the arrow stays at the end
                    }
                }
            }
            
            // Update parallelogram
            function updateParallelogram() {
                // Update parallelogram edges based on vectors
                const e1aEnd = vectorData.e1a.end;
                const e2aEnd = vectorData.e2a.end;
                const e1bEnd = vectorData.e1b.end;
                
                const parallelogram = document.querySelector('.vector-line:not([class*="diagonal"]):not([class*="e1a"]):not([class*="e2a"]):not([class*="e1b"]):not([class*="e2b"])');
                if (parallelogram) {
                    parallelogram.setAttribute('d', `M${vectorData.e1a.start.x},${vectorData.e1a.start.y} L${e1aEnd.x},${e1aEnd.y} L${e1bEnd.x},${e1bEnd.y} L${e2aEnd.x},${e2aEnd.y} Z`);
                }
                
                // Update diagonals
                const diagonal1 = document.querySelector('.vector-line.diagonal-1');
                if (diagonal1) {
                    diagonal1.setAttribute('d', `M${vectorData.e1a.start.x},${vectorData.e1a.start.y} L${e1bEnd.x},${e1bEnd.y}`);
                }
                
                const diagonal2 = document.querySelector('.vector-line.diagonal-2');
                if (diagonal2) {
                    diagonal2.setAttribute('d', `M${e1aEnd.x},${e1aEnd.y} L${e2aEnd.x},${e2aEnd.y}`);
                }
            }
            
            // Make vectors draggable
            let selectedElement = null;
            let offset = { x: 0, y: 0 };
            
            vectorArrows.forEach(arrow => {
                arrow.addEventListener('mousedown', startDrag);
                arrow.addEventListener('touchstart', startDrag, { passive: true });
            });
            
            document.addEventListener('mousemove', drag);
            document.addEventListener('touchmove', drag, { passive: true });
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchend', endDrag);
            
            function startDrag(evt) {
                evt.preventDefault();
                selectedElement = this;
                
                const vectorId = this.dataset.vector;
                const vector = vectorData[vectorId];
                
                // Calculate offset based on mouse/touch position
                if (evt.type === 'mousedown') {
                    const svgPoint = getSVGPoint(evt.clientX, evt.clientY);
                    offset.x = svgPoint.x - vector.end.x;
                    offset.y = svgPoint.y - vector.end.y;
                } else { // touchstart
                    const touch = evt.touches[0];
                    const svgPoint = getSVGPoint(touch.clientX, touch.clientY);
                    offset.x = svgPoint.x - vector.end.x;
                    offset.y = svgPoint.y - vector.end.y;
                }
            }
            
            function drag(evt) {
                if (selectedElement) {
                    evt.preventDefault();
                    const vectorId = selectedElement.dataset.vector;
                    const vector = vectorData[vectorId];
                    
                    let svgPoint;
                    if (evt.type === 'mousemove') {
                        svgPoint = getSVGPoint(evt.clientX, evt.clientY);
                    } else { // touchmove
                        const touch = evt.touches[0];
                        svgPoint = getSVGPoint(touch.clientX, touch.clientY);
                    }
                    
                    // Update end point based on drag
                    vector.end.x = svgPoint.x - offset.x;
                    vector.end.y = svgPoint.y - offset.y;
                    
                    // Update dependent vectors
                    if (vectorId === 'e1a') {
                        // e2b's end point depends on e1a's end point
                        vectorData.e2b.end.x = vector.end.x;
                        vectorData.e2b.end.y = vector.end.y;
                    } else if (vectorId === 'e2a') {
                        // e1b's start point depends on e2a's end point
                        vectorData.e1b.start.x = vector.end.x;
                        vectorData.e1b.start.y = vector.end.y;
                    } else if (vectorId === 'e1b') {
                        // e2b's start point depends on e1b's end point
                        vectorData.e2b.start.x = vector.end.x;
                        vectorData.e2b.start.y = vector.end.y;
                    }
                    
                    // Update all vectors and the parallelogram
                    Object.keys(vectorData).forEach(updateVector);
                    updateParallelogram();
                    
                    // Update coordinate info if showing
                    if (showingCoords) {
                        showVectorInfo(vectorId);
                    }
                }
            }
            
            function endDrag() {
                selectedElement = null;
            }
            
            // Helper to convert client coordinates to SVG coordinates
            function getSVGPoint(clientX, clientY) {
                const pt = vectorSvg.createSVGPoint();
                pt.x = clientX;
                pt.y = clientY;
                return pt.matrixTransform(vectorSvg.getScreenCTM().inverse());
            }
        }
        
        // Page 2: Interactive Charts functionality
        function initPage2() {
            // 左侧图表交互
            const leftChart = document.querySelector('#page2 .grid-cols-1.md\\:grid-cols-2 .chart-container:first-child svg');
            const tooltip1 = document.getElementById('tooltip1');
            const tooltipText1 = document.getElementById('tooltip-text1');
            
            // 为左侧图表元素添加交互
            leftChart.querySelectorAll('.data-point').forEach(element => {
                element.addEventListener('mouseenter', (e) => {
                    const pt = leftChart.createSVGPoint();
                    pt.x = e.clientX;
                    pt.y = e.clientY;
                    const svgPoint = pt.matrixTransform(leftChart.getScreenCTM().inverse());
                    
                    let text = '';
                    if (element.tagName === 'rect' && element.getAttribute('fill') !== 'none') {
                        text = element.getAttribute('height') > 50 ? 'High Probability' : 'Low Probability';
                    } else if (element.getAttribute('stroke-dasharray') === '4,2') {
                        text = 'Projected Area';
                    }
                    
                    tooltip1.setAttribute('x', svgPoint.x + 10);
                    tooltip1.setAttribute('y', svgPoint.y - 10);
                    tooltipText1.setAttribute('x', svgPoint.x + 15);
                    tooltipText1.setAttribute('y', svgPoint.y - 2);
                    tooltipText1.textContent = text;
                    
                    tooltip1.style.opacity = '1';
                    tooltipText1.style.opacity = '1';
                    element.style.opacity = '1';
                    element.style.stroke = '#7C3AED';
                    element.style.strokeWidth = '2';
                });
                
                element.addEventListener('mouseleave', () => {
                    tooltip1.style.opacity = '0';
                    tooltipText1.style.opacity = '0';
                    element.style.opacity = '';
                    element.style.stroke = '';
                    element.style.strokeWidth = '';
                });
            });
            
            // 右侧图表交互
            const rightChart = document.querySelector('#page2 .grid-cols-1.md\\:grid-cols-2 .chart-container:last-child svg');
            const tooltip2 = document.getElementById('tooltip2');
            const tooltipText2 = document.getElementById('tooltip-text2');
            
            rightChart.querySelectorAll('.data-point').forEach((element, index) => {
                element.addEventListener('mouseenter', (e) => {
                    const pt = rightChart.createSVGPoint();
                    pt.x = e.clientX;
                    pt.y = e.clientY;
                    const svgPoint = pt.matrixTransform(rightChart.getScreenCTM().inverse());
                    
                    const text = index === 0 ? 'Actual Position' : 'Predicted Position';
                    
                    tooltip2.setAttribute('x', svgPoint.x + 10);
                    tooltip2.setAttribute('y', svgPoint.y - 10);
                    tooltipText2.setAttribute('x', svgPoint.x + 15);
                    tooltipText2.setAttribute('y', svgPoint.y - 2);
                    tooltipText2.textContent = text;
                    
                    tooltip2.style.opacity = '1';
                    tooltipText2.style.opacity = '1';
                    element.style.opacity = '1';
                    element.style.stroke = '#10B981';
                    element.style.strokeWidth = index === 0 ? '3.5' : '2.5';
                });
                
                element.addEventListener('mouseleave', () => {
                    tooltip2.style.opacity = '0';
                    tooltipText2.style.opacity = '0';
                    element.style.opacity = '';
                    element.style.stroke = '';
                    element.style.strokeWidth = index === 0 ? '2.5' : '2';
                });
            });
        }
        
        // Page 3: Venn Diagram functionality
        function initPage3() {
            // 获取所有可交互区域
            const sections = document.querySelectorAll('#page3 .section');
            const infoPanel = document.getElementById('infoPanel');
            const panelTitle = document.getElementById('panelTitle');
            const panelDescription = document.getElementById('panelDescription');
            const selectionCount = document.getElementById('selectionCount');
            const resetBtn = document.getElementById('resetBtn');
            
            // 加载保存的状态
            function loadSavedState() {
                const savedState = localStorage.getItem('vennDiagramState');
                if (savedState) {
                    const selectedAreas = JSON.parse(savedState);
                    sections.forEach(section => {
                        if (selectedAreas.includes(section.dataset.area)) {
                            section.classList.add('selected');
                        }
                    });
                    updateSelectionCount();
                }
            }
            
            // 保存当前状态
            function saveCurrentState() {
                const selectedAreas = Array.from(sections)
                    .filter(section => section.classList.contains('selected'))
                    .map(section => section.dataset.area);
                localStorage.setItem('vennDiagramState', JSON.stringify(selectedAreas));
            }
            
            // 更新选中计数
            function updateSelectionCount() {
                const count = document.querySelectorAll('#page3 .section.selected').length;
                selectionCount.textContent = `已选中: ${count} 个区域`;
            }
            
            // 显示区域信息
            function showAreaInfo(section) {
                panelTitle.textContent = section.dataset.area.charAt(0).toUpperCase() + section.dataset.area.slice(1);
                panelDescription.textContent = section.dataset.description;
                infoPanel.classList.add('active');
            }
            
            // 为每个区域添加交互效果
            sections.forEach(section => {
                // 点击选中/取消选中
                section.addEventListener('click', () => {
                    section.classList.toggle('selected');
                    updateSelectionCount();
                    saveCurrentState();
                    
                    // 添加点击动画
                    section.classList.add('scale');
                    setTimeout(() => {
                        section.classList.remove('scale');
                    }, 200);
                });
                
                // 鼠标悬停效果（未选中状态下）
                section.addEventListener('mouseenter', () => {
                    if (!section.classList.contains('selected')) {
                        section.style.stroke = '#666';
                        section.style.strokeWidth = '2';
                    }
                    // 显示信息面板
                    showAreaInfo(section);
                });
                
                // 鼠标离开恢复
                section.addEventListener('mouseleave', () => {
                    if (!section.classList.contains('selected')) {
                        section.style.stroke = 'none';
                        section.style.strokeWidth = '0';
                    }
                });
            });
            
            // 重置按钮功能
            resetBtn.addEventListener('click', () => {
                sections.forEach(section => {
                    section.classList.remove('selected');
                });
                updateSelectionCount();
                localStorage.removeItem('vennDiagramState');
            });
            
            // 初始加载
            loadSavedState();
        }
        
        // Page 4: Validation Chart functionality
        function initPage4() {
            // 模拟交叉验证数据
            const cvData = {
                models: ['BERT', 'RoBERTa', 'BART'],
                meanAccuracy: [85.2, 87.6, 84.1],
                stdDeviation: [2.3, 1.8, 2.7]
            };
            
            // 创建图表
            const ctx = document.getElementById('accuracyChart').getContext('2d');
            const accuracyChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: cvData.models,
                    datasets: [
                        {
                            label: 'Mean Accuracy (%)',
                            data: cvData.meanAccuracy,
                            backgroundColor: 'rgba(245, 158, 11, 0.8)',
                            borderColor: 'rgba(245, 158, 11, 1)',
                            borderWidth: 2,
                            yAxisID: 'y'
                        },
                        {
                            label: 'Standard Deviation',
                            data: cvData.stdDeviation,
                            backgroundColor: 'rgba(245, 158, 11, 0.3)',
                            borderColor: 'rgba(245, 158, 11, 0.7)',
                            borderWidth: 2,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    // 添加缩放和平移功能
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Cross Validation Accuracy (%)',
                            font: {
                                size: 18,
                                weight: 'bold'
                            },
                            padding: {
                                bottom: 20
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw}%`;
                                }
                            }
                        },
                        zoom: {
                            pan: {
                                enabled: true,
                                mode: 'xy'
                            },
                            zoom: {
                                enabled: true,
                                mode: 'xy'
                            }
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Mean Accuracy (%)'
                            },
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                drawOnChartArea: false
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Standard Deviation'
                            },
                            beginAtZero: true,
                            max: 10,
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });
            
            // 切换数据显示按钮
            document.getElementById('toggleData').addEventListener('click', function() {
                accuracyChart.data.datasets.forEach(dataset => {
                    dataset.hidden = !dataset.hidden;
                });
                accuracyChart.update();
            });
            
            // 切换图表类型按钮
            document.getElementById('toggleType').addEventListener('click', function() {
                const newType = accuracyChart.config.type === 'bar' ? 'line' : 'bar';
                accuracyChart.config.type = newType;
                
                // 调整线条图表的样式
                if (newType === 'line') {
                    accuracyChart.data.datasets.forEach(dataset => {
                        dataset.fill = false;
                        dataset.tension = 0.3;
                        dataset.pointRadius = 6;
                        dataset.pointHoverRadius = 8;
                    });
                } else {
                    // 恢复柱状图样式
                    accuracyChart.data.datasets.forEach((dataset, index) => {
                        dataset.fill = true;
                        dataset.tension = 0;
                        dataset.pointRadius = 0;
                        dataset.backgroundColor = index === 0 ? 'rgba(245, 158, 11, 0.8)' : 'rgba(245, 158, 11, 0.3)';
                    });
                }
                
                accuracyChart.update();
            });
            
            // 重置缩放按钮
            document.getElementById('resetZoom4').addEventListener('click', function() {
                accuracyChart.resetZoom();
            });
            
            // 复选框控制数据显示
            document.getElementById('showMean').addEventListener('change', function(e) {
                accuracyChart.data.datasets[0].hidden = !e.target.checked;
                accuracyChart.update();
            });
            
            document.getElementById('showStd').addEventListener('change', function(e) {
                accuracyChart.data.datasets[1].hidden = !e.target.checked;
                accuracyChart.update();
            });
        }
        
        // Page 5: Density Distribution functionality
        function initPage5() {
            // Generate sample data
            function generateData() {
                const data = {
                    x: Array.from({length: 100}, (_, i) => i / 99),
                    y0: [],
                    y1: []
                };
                
                // Generate two overlapping normal distributions
                data.x.forEach(x => {
                    // First distribution - p(x, y=0)*v(x)
                    const y0 = 3 * Math.exp(-Math.pow(x - 0.3, 2) / (2 * Math.pow(0.2, 2))) + 
                               0.5 * Math.random();
                    data.y0.push(y0);
                    
                    // Second distribution - p(x, y=1)*v(x)
                    const y1 = 3 * Math.exp(-Math.pow(x - 0.7, 2) / (2 * Math.pow(0.2, 2))) + 
                               0.5 * Math.random();
                    data.y1.push(y1);
                });
                
                return data;
            }
            
            const data = generateData();
            
            // Create gradient for overlapping area
            const ctx = document.getElementById('densityChart').getContext('2d');
            const overlapGradient = ctx.createLinearGradient(0, 0, 0, 400);
            overlapGradient.addColorStop(0, 'rgba(156, 163, 175, 0.8)');
            overlapGradient.addColorStop(1, 'rgba(156, 163, 175, 0.1)');
            
            // Initialize chart
            function initChart() {
                return new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: data.x,
                        datasets: [
                            {
                                label: 'p(x, y=0)*v(x)',
                                data: data.y0,
                                borderColor: '#F59E0B',
                                backgroundColor: 'rgba(245, 158, 11, 0.1)',
                                borderWidth: 3,
                                fill: true,
                                tension: 0.4,
                                pointRadius: 0,
                                pointHoverRadius: 6,
                                pointHoverBackgroundColor: '#F59E0B',
                                pointHoverBorderColor: '#fff',
                                pointHoverBorderWidth: 2,
                                indexAxis: 'x',
                            },
                            {
                                label: 'p(x, y=1)*v(x)',
                                data: data.y1,
                                borderColor: '#3B82F6',
                                backgroundColor: overlapGradient,
                                borderWidth: 3,
                                fill: true,
                                tension: 0.4,
                                pointRadius: 0,
                                pointHoverRadius: 6,
                                pointHoverBackgroundColor: '#3B82F6',
                                pointHoverBorderColor: '#fff',
                                pointHoverBorderWidth: 2,
                                indexAxis: 'x',
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                onHover: function(e, elements) {
                                    const infoBox = document.getElementById('infoBox5');
                                    if (elements.length) {
                                        const element = elements[0];
                                        const datasetIndex = element.datasetIndex;
                                        const index = element.index;
                                        const value = this.data.datasets[datasetIndex].data[index].toFixed(4);
                                        const xValue = this.data.labels[index].toFixed(4);
                                        
                                        infoBox.innerHTML = `
                                            <strong>${this.data.datasets[datasetIndex].label}</strong><br>
                                            x: ${xValue}<br>
                                            Value: ${value}
                                        `;
                                        
                                        // Position the info box near the mouse
                                        const canvasPosition = this.canvas.getBoundingClientRect();
                                        infoBox.style.left = (e.clientX - canvasPosition.left + 10) + 'px';
                                        infoBox.style.top = (e.clientY - canvasPosition.top - 60) + 'px';
                                        infoBox.style.opacity = '1';
                                    } else {
                                        document.getElementById('infoBox5').style.opacity = '0';
                                    }
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            zoom: {
                                pan: {
                                    enabled: true,
                                    mode: 'x'
                                },
                                zoom: {
                                    enabled: true,
                                    mode: 'x'
                                }
                            }
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'x'
                                },
                                min: 0,
                                max: 1
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Density'
                                },
                                min: 0
                            }
                        }
                    }
                });
            }
            
            // Theme toggle functionality
            function setupThemeToggle() {
                const themeToggle = document.getElementById('theme-toggle');
                
                // Check user preference
                if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.classList.add('dark');
                }
                
                // Toggle theme
                themeToggle.addEventListener('click', () => {
                    document.documentElement.classList.toggle('dark');
                    // Re-initialize chart to adapt to theme changes
                    chart.destroy();
                    chart = initChart();
                });
            }
            
            // Legend click handlers
            document.getElementById('legend-0').addEventListener('click', () => {
                chart.data.datasets[0].hidden = !chart.data.datasets[0].hidden;
                chart.update();
                document.getElementById('legend-0').classList.toggle('opacity-50', chart.data.datasets[0].hidden);
            });
            
            document.getElementById('legend-1').addEventListener('click', () => {
                chart.data.datasets[1].hidden = !chart.data.datasets[1].hidden;
                chart.update();
                document.getElementById('legend-1').classList.toggle('opacity-50', chart.data.datasets[1].hidden);
            });
            
            // Reset zoom button
            document.getElementById('reset-zoom5').addEventListener('click', () => {
                chart.resetZoom();
            });
            
            // Initialization
            let chart;
            chart = initChart();
            setupThemeToggle();
        }
    </script>
</body>
</html>